
##                           _
##                          | |_ _ __ ___  _   ___  __                __
##                          | __| '_ ` _ \| | | \ \/ /   __ ___ _ _  / _|
##                          | |_| | | | | | |_| |>  <  _/ _/ _ \ ' \|  _|
##                           \__|_| |_| |_|\__,_/_/\_\(_)__\___/_||_|_|
##  ===============================================================================================
#   TITLE : tmux.conf
#   ABOUT : Configuration for TMUX
#   LINKS : -
#   FILES : -
#   TAGS  : [[system]] [[tmux]]
##  ===============================================================================================
#    1. Key-Unbindings...........................................................controls  \n   29
#    2. Server....................................................................options  \n  112
#    3. Global....................................................................options  \n  135
#    4. Windows & Panes...........................................................options  \n  199
#    5. Keybindings...............................................................controls \n  225
#   5. PLUGINS..............................................................................\n ****
#           .1 TPM..........................................................................\n ****
#           .2 MENUS........................................................................\n ****
#           .3 MIGHTY-SCROLL................................................................\n ****
#           .2 POWER-ZOOM...................................................................\n ****
#           .3 FZF..........................................................................\n ****
#               .1 FZF-LINKS................................................................\n ****
#               .2 FZF OPEN-FILES...........................................................\n ****
#               .3 FZF-URL..................................................................\n ****
#           .4 GENTRIFY.....................................................................\n ****
##  ===============================================================================================

##  ---[ Key-unbindings   ]----------------------------------------------------------------------///
    unbind C-b  # Send the prefix key (C-b) through to the application. >> >> >> C-a
    unbind C-o  # Rotate the panes in the current window forwards.
    unbind C-z  # Suspend the tmux client.

    unbind Up     # Change to the pane above, below, to the left, or to the right of the current pane.
    unbind Down   # • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • •
    unbind Left   # • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • •
    unbind Right  # Change to the pane above, below, to the left, or to the right of the current pane.

    unbind C-Up	    # Resize the current pane in steps of one cell.
    unbind C-Down   # • • • • • • • • • • • • • • • • • • • • • •
    unbind C-Left   # • • • • • • • • • • • • • • • • • • • • • •
    unbind C-Right  # Resize the current pane in steps of one cell.

    unbind M-Up     # Resize the current pane in steps of five cells.
    unbind M-Down   # • • • • • • • • • • • • • • • • • • • • • • •
    unbind M-Left   # • • • • • • • • • • • • • • • • • • • • • • •
    unbind M-Right  # Resize the current pane in steps of five cells.

    unbind M-1  # Arrange panes in one of the five preset layouts: even-horizontal, even-vertical, main-horizontal, main-vertical, or tiled.
    unbind M-2  # • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • •
    unbind M-3  # • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • •
    unbind M-4  # • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • • •
    unbind M-5  # Arrange panes in one of the five preset layouts: even-horizontal, even-vertical, main-horizontal, main-vertical, or tiled.

    unbind M-n  # Move to the next window with a bell or activity marker.
    unbind M-o  # Rotate the panes in the current window backwards.
    unbind M-p  # Move to the previous window with a bell or activity marker.
    unbind Space  # Arrange the current window in the next preset layout.

    unbind !    # Break the current pane out of the window.
    unbind '"'  # Split the current pane into two, top and bottom.
    unbind '#'  # List all paste buffers.
    unbind '$'  # Rename the current session.
    unbind %    # Split the current pane into two, left and right.
    unbind &    # Kill the current window.
    unbind "'"  # Prompt for a window index to select.
    unbind (    # Switch the attached client to the previous session.
    unbind )    # Switch the attached client to the next session.
    unbind ,    # Rename the current window.
    unbind -    # Delete the most recently copied buffer of text.
    unbind .    # Prompt for an index to move the current window.
    unbind :    # Enter the tmux command prompt.
    unbind ';'  # Move to the previously active pane.
    unbind =    # Choose which buffer to paste interactively from a list.
    unbind ?    # List all key bindings.
    unbind D    # Choose a client to detach.
    unbind L    # Switch the attached client back to the last session.
    #unbind [    # Enter copy mode to copy text or view the history.
    #unbind ]    # Paste the most recently copied buffer of text.
    unbind c    # Create a new window.
    unbind d    # Detach the current client.
    unbind f    # Prompt to search for text in open windows.
    unbind i    # Display some information about the current window.
    unbind l    # Move to the previously selected window.
    unbind m    # Mark the current pane (see select-pane -m).
    unbind M    # Clear the marked pane.
    unbind n    # Change to the next window.	>>	>>	>>	>>	>>	>>	>>	>>	>>	>>	C-Right
    unbind o    # Select the next pane in the current window.
    unbind p    # Change to the previous window.
    #unbind q    # Briefly display pane indexes.
    unbind r    # Force redraw of the attached client.
    unbind s    # Select a new session for the attached client interactively.
    unbind t    # Show the time.
    #nbind w    # Choose the current window interactively.
    unbind x    # Kill the current pane.
    #Sunbind z   # Toggle zoom state of the current pane.
    unbind '{'  # Swap the current pane with the previous pane.
    unbind '}'  # Swap the current pane with the next pane.
    unbind '~'  # Show previous messages from tmux, if any.

    unbind 0  # Select windows 0 to 9.
    unbind 1  # • • • • • • • • • •
    unbind 2  # • • • • • • • • • •
    unbind 3  # • • • • • • • • • •
    unbind 4  # • • • • • • • • • •
    unbind 5  # • • • • • • • • • •
    unbind 6  # • • • • • • • • • •
    unbind 7  # • • • • • • • • • •
    unbind 8  # • • • • • • • • • •
    unbind 9  # Select windows 0 to 9.

    unbind -T popup Tab
##  ---------------------------------------------------------------------------------------------\\\
##  ---[ Server           ]----------------------------------------------------------------------///
    set -s default-terminal 'tmux-256color'
    set -s editor nvim
    set -s escape-time 0
    set -s exit-empty off # If enabled (the default), the server will exit when there are no active sessions.
    set -s exit-unattached off # If enabled, the server will exit when there are no attached clients.
    set -s extended-keys on
    set -s focus-events on
    set -s history-file ''
    set -s message-limit '10000'
    set -s prompt-history-limit '10000'
    set -s set-clipboard external
    set -as terminal-overrides ',xterm*:sitm=\E[3m:ritm=\E[23m'
    ##   set -s terminal-overrides ',xterm*:sitm=\E[3m'
    set -s terminal-features[0] ,*:rgb:xterm*:clipboard:ccolour:cstyle:focus:title #xterm*:clipboard:ccolour:cstyle:focus:title # Set terminal features for terminal types read from terminfo(5). tmux has a set of named terminal features. Each will apply appropriate changes to the terminfo(5) entry in use. This is an array option where each entry is a colon-separated string made up of a terminal type pattern (matched using fnmatch(3)) followed by a list of terminal features.
    set -s terminal-features[1] screen*:title # (part of terminal-features array)
#    set -s user-keys # Set list of user-defined key escape sequences. Each item is associated with a key named 'User0', 'User1', and so on.
#    set -s command-alias[0] split-pane=split-window
#    set -s command-alias[1] splitp=split-window
#    set -s command-alias[2] "server-info=show-messages -JT"
#    set -s command-alias[3] "info=show-messages -JT"
#    set -s command-alias[4] "choose-window=choose-tree -w"
#    set -s command-alias[5] "choose-session=choose-tree -s"
##  ---------------------------------------------------------------------------------------------\\\
##  ---[ Global           ]----------------------------------------------------------------------///
    set -g activity-action other
    set -g assume-paste-time 1
    set -g base-index 1
    set -g bell-action any
    set -g default-command ''
    set -g default-shell /usr/bin/bash
    set -g default-size 80x24
    set -g destroy-unattached off
    set -g detach-on-destroy on
    set -g display-panes-active-colour color161
    set -g display-panes-colour color240
    set -g display-panes-time 1000
    set -g display-time 4000
    set -g history-limit 10000
    set -g message-command-style "bg=color016 fg=color190,italics"
    set -g message-style "bg=color016 fg=color190,italics"
    set -g mouse on
    set -g prefix C-a
    set -g prefix2 None
    set -g renumber-windows on
    set -g repeat-time 1200
    set -g set-titles off
    set -g silence-action none
    set -g status on
    set -g status-bg color016
    set -g status-fg color250

    # Specify the format to be used for each line of the status line. The default builds the top status line from the various individual status options below.
    # set -g status-format[0] "#[align=left range=left #{E:status-left-style}]#[push-default]#{T;=/#{status-left-length}:status-left}#[pop-default]#[norange default]#[list=on align=#{status-justify}]#[list=left-marker]<#[list=right-marker]>#[list=on]#{W:#[range=window|#{window_index} #{E:window-status-style}#{?#{&&:#{window_last_flag},#{!=:#{E:window-status-last-style},default}}, #{E:window-status-last-style},}#{?#{&&:#{window_bell_flag},#{!=:#{E:window-status-bell-style},default}}, #{E:window-status-bell-style},#{?#{&&:#{||:#{window_activity_flag},#{window_silence_flag}},#{!=:#{E:window-status-activity-style},default}}, #{E:window-status-activity-style},}}]#[push-default]#{T:window-status-format}#[pop-default]#[norange default]#{?window_end_flag,,#{window-status-separator}},#[range=window|#{window_index} list=focus #{?#{!=:#{E:window-status-current-style},default},#{E:window-status-current-style},#{E:window-status-style}}#{?#{&&:#{window_last_flag},#{!=:#{E:window-status-last-style},default}}, #{E:window-status-last-style},}#{?#{&&:#{window_bell_flag},#{!=:#{E:window-status-bell-style},default}}, #{E:window-status-bell-style},#{?#{&&:#{||:#{window_activity_flag},#{window_silence_flag}},#{!=:#{E:window-status-activity-style},default}}, #{E:window-status-activity-style},}}]#[push-default]#{T:window-status-current-format}#[pop-default]#[norange list=on default]#{?window_end_flag,,#{window-status-separator}}}#[nolist align=right range=right #{E:status-right-style}]#[push-default]#{T;=/#{status-right-length}:status-right}#[pop-default]#[norange default]"

    # (part of status-format array)
    set -g status-format[1] "#[align=centre]#{P:#{?pane_active,#[reverse],}#{pane_index}[#{pane_width}x#{pane_height}]#[default] }"

    set -g status-interval 5
    set -g status-justify absolute-centre
    set -g status-keys emacs

    # Display string (by default the session name) to the left of the status line. string will be passed through strftime(3). Also see the FORMATS and STYLES sections.
    set -g status-left "#{prefix_highlight}"
    set -g status-left-length 10
    set -g status-left-style 'bold fg=color016 bg=color250'
    set -g status-position top
    set-option -g status-right "#{prefix_highlight} #(cat /sys/class/power_supply/battery/capacity)%% #(cat /sys/class/power_supply/battery/status | grep -q \"Charging\" && echo \"⚡️\")%H:%M"
    set -g status-right-length 40
    set -g status-right-style default
#    Set status line style. For how to specify style (e.g., bg=colour, fg=colour, bold, reverse), see the STYLES section in the tmux man page.
    set -g status-style default
    set -g update-environment[0] DISPLAY
    set -g update-environment[1] KRB5CCNAME
    set -g update-environment[2] SSH_ASKPASS
    set -g update-environment[3] SSH_AUTH_SOCK
    set -g update-environment[4] SSH_AGENT_PID
    set -g update-environment[5] SSH_CONNECTION
    set -g update-environment[6] WINDOWID
    set -g update-environment[7] XAUTHORITY
    set -g visual-activity off
    set -g visual-bell off
    set -g visual-silence off
    set -g word-separators "!\"#$%&'()*+,-./:;<=>?@[\\]^`{|}~"

#    set-option -g lock-after-time 10
#    set-option -g lock-command "perl ~/.scripts/asciiquarium"
##  ---------------------------------------------------------------------------------------------\\\
##  ---[ Windows / Panes  ]----------------------------------------------------------------------///
    set -wg cursor-colour color161
    set -wg cursor-style blinking-block
    set -wg allow-passthrough on
    set -wg allow-rename on
    set -wg alternate-screen on
    set -wg automatic-rename on
    set -wg automatic-rename-format "#{?pane_in_mode,[tmux],#{pane_current_command}}#{?pane_dead,[dead],}"
    set -wg clock-mode-colour color161
    set -wg clock-mode-style 24
    set -wg copy-mode-match-style "bg=color161 fg=color016"
    set -wg copy-mode-current-match-style "bg=color161 fg=color016"
    set -wg copy-mode-mark-style "bg=color161 fg=color016"
    set -wg mode-keys vi
    set -wg mode-style "bg=color161 fg=color016"
    set -wg other-pane-height 3
    set -wg other-pane-width 3
    set -wg pane-base-index 1
    set -wg pane-border-lines double
    set -wg popup-border-lines double
    set -g window-status-separator " "
    set -wg wrap-search on
    set -wg xterm-keys on
    set -g pane-active-border-style fg=color197
    set -g pane-border-style fg=colour240
##  ---------------------------------------------------------------------------------------------\\\
##  ---[ Keybindings      ]----------------------------------------------------------------------///
    bind | split-window -h -c ~
    bind - split-window -v -c ~
    bind c new-window -c ~

    bind-key C-a send-prefix

    bind -n M-Up select-pane -U
    bind -n M-Down select-pane -D
    bind -n M-Left select-pane -L
    bind -n M-Right select-pane -R

    bind -n S-Right next-window
    bind -n S-Left previous-window

    bind-key -T copy-mode-vi C-a send-keys -X start-of-line
    bind-key -T copy-mode-vi C-e send-keys -X end-of-line

    bind r source-file ~/.config/tmux/tmux.conf \; display-message "                                                                               ♻️  RELOADED ♻️"

    bind w display-popup -E -w 30% -h 50% ~/.config/tmux/scripts/tmux-menu.sh
    bind -n C-t display-popup -E -w 80% -h 80% ~/.config/tmux/scripts/tmux-scratch.sh
    bind -T popup t send-keys t
    bind -T popup q send-keys q
    bind -T popup C-t detach
    bind -T popup C-[ copy-mode

    bind g display-popup -d "#{pane_current_path}" -E -w 80% -h 80% -E lazygit
##  ---------------------------------------------------------------------------------------------\\\
##  ---[ Plugins          ]----------------------------------------------------------------------///

##  --------------------------[ TPM              ]-----------------------------------------------///
    #  Prefix + I...install plugins      Prefix + U...update plugins
    set -g @plugin 'tmux-plugins/tpm'
    set -g @plugin 'jaclu/tmux-power-zoom'
    # set -g @plugin 'sainnhe/tmux-fzf'
    set -g @plugin 'kristopolous/tmux-gentrify'
    set -g @plugin 'jaclu/tmux-menus'
    set -g @plugin 'noscript/tmux-mighty-scroll'
    set -g @plugin 'graemedavidson/tmux-pane-focus' # This is reconfigured in the menu-plugin
    #set -g @plugin 'tmux-plugins/tmux-sidebar'
    # set -g @plugin '2kabhishek/tmux-tilit'
    set -g @plugin 'schasse/tmux-jump'
    set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
    set -g @plugin 'christoomey/vim-tmux-navigator'
    set -g @plugin 'tmux-plugins/tmux-resurrect'
    set -g @plugin 'tmux-plugins/tmux-continuum'
##  ---------------------------------------------------------------------------------------------\\\
##  --------------------------[ Save / Restore   ]-----------------------------------------------///
    set -g @resurrect-capture-pane-contents 'on'
    set -g @continuum-restore 'on'
    set -g @continuum-save-interval '1'
##  ---------------------------------------------------------------------------------------------\\\

##  --------------------------[ Power-Zoom       ]-----------------------------------------------///
#  Zoom in with Prefix + z    or    with double clicking a plane
    set -g @power_zoom_trigger z
    set -g @power_zoom_without_prefix 0
    set -g @power_zoom_mouse_action DoubleClick1Pane
##  ---------------------------------------------------------------------------------------------\\\

#   5. =======================[     GENTRIFY      ]==========================///
#  Prefix + C-x   cut a pane
#  Prefix + C-v paste a pane in new window                                  #\\\

#   5. =======================[       MENUS       ]==========================///
#  Prefix + C-space  Pop the menu open.
set -g @menus_trigger 'Space'
set -g @menus_without_prefix 'No'
set -g @menus_config_file "$XDG_CONFIG_HOME/tmux/tmux.conf"
set -g @menus_use_cache 'Yes'
set -g @menus_use_hint_overlays 'Yes'
set -g @menus_show_key_hints 'Yes'                                          #\\\

#   5. =======================[   MIGHTY-SCROLL   ]==========================///
set -g @mighty-scroll-interval 2
set -g @mighty-scroll-select-pane on
# set -g @mighty-scroll-by-line
# set -g @mighty-scroll-by-page
# set -g @mighty-scroll-pass-through
# set -g @mighty-scroll-fallback-mode
# set -g @mighty-scroll-show-indicator                                      #\\\

#   5. =======================[ PREFIX-HIGHLIGHT  ]========================///
set -g @prefix_highlight_fg 'color161,bold'
set -g @prefix_highlight_bg 'color016'
set -g @prefix_highlight_show_copy_mode 'on'
set -g @prefix_highlight_copy_mode_attr 'fg=color016,bg=color161,bold'
set -g @prefix_highlight_show_sync_mode 'on'
set -g @prefix_highlight_sync_mode_attr 'fg=black,bg=green' # default is 'fg=default,bg=yellow' #\\\

#   5. =======================[        JUMP       ]==========================///
    set -g @jump-bg-color '\e[0m\e[38;5;246m'
    set -g @jump-fg-color '\e[1;3m\e[38;5;196m'                             #\\\

#   5. =======================[       ENDING      ]==========================///

run '~/.config/tmux/plugins/tpm/tpm'                                    #\\\

##  ---------------------------------------------------------------------------------------------\\\

